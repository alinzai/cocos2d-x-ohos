"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UniOhSdkInfoHandler=void 0;const sdkmanager_common_1=require("@ohos/sdkmanager-common"),uni_oh_local_component_loader_1=require("../loader/uni-oh-local-component-loader"),uni_oh_remote_component_loader_1=require("../loader/uni-oh-remote-component-loader"),uni_oh_license_manager_1=require("../license/uni-oh-license-manager"),uni_oh_task_factory_1=require("../task/uni-oh-task-factory"),hos_local_component_loader_1=require("../loader/hos-local-component-loader");class UniOhSdkInfoHandler extends sdkmanager_common_1.CommonSdkInfoHandler{constructor(e,n=new sdkmanager_common_1.SimpleProgress){super(new sdkmanager_common_1.SdkInfoSettings(e)),this._progress=n,this._sdkInfoConfig=e}getOrDownload(e){const n=new uni_oh_local_component_loader_1.UniOhLocalComponentLoader(this.sdkSettings.getLocation(),this._progress);return this.doGetOrDownload(e,this.mapComponents(n.load()),(e=>{const o=n.getInCompatibleComponents(),t=new hos_local_component_loader_1.HosLocalComponentLoader(this.sdkSettings.getLocation(),this._progress);t.load();const s=t.getInCompatibleComponents();if(o.length>0||s.length>0)throw new sdkmanager_common_1.SdkException("UniOhSdkInfoHandler execution failed",new sdkmanager_common_1.ErrorTip("","The SDK management mode has changed.",`\n\t\tMethod 1: Update the SDKs by going to Tools > SDK Manager > SDKs > HarmonyOS and following the onscreen instructions. Open SDK Manager\n\t\tMethod 2: Uninstall the SDKs in the following paths:\n${s.map((e=>`\t\t    ${e.getLocation()}`)).join("\n")}\n${o.map((e=>`\t\t    ${e.getLocation()}`)).join("\n")}\n`))}))}createInstallComponentTask(e){return(0,uni_oh_task_factory_1.createUniOhInstallTask)(e,this.sdkSettings,this.sdkSettings.getNetClient())}findUnacceptedLicenses(e){return new uni_oh_license_manager_1.UniOhLicenseManager(this.sdkSettings,this.sdkSettings.getNetClient(),e).findUnacceptedLicenses([],this.getProgress())}getNotFoundException(){return"1.Go to Tools > SDK Manager > SDKs > HarmonyOS, download the components, and sync the project. Open SDK Manager"}getLicenseNotAcceptedMessage(e){const n=e.join(",");return new sdkmanager_common_1.ErrorTip("","The SDK license agreement is not accepted.",`Go to Tools > SDK Manager > SDKs > HarmonyOS, download the ${n} SDK, and accept the license agreement. Open SDK Manager`)}getLocalComponents(){return new uni_oh_local_component_loader_1.UniOhLocalComponentLoader(this.sdkSettings.getLocation(),this.getProgress()).load()}getProgress(){return this._progress}getRemoteComponents(){return new uni_oh_remote_component_loader_1.UniOhRemoteComponentLoader(this.sdkSettings,this.sdkSettings.getNetClient(),this.getProgress()).load()}}exports.UniOhSdkInfoHandler=UniOhSdkInfoHandler;