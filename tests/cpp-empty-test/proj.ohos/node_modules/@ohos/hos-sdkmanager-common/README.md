# hos-sdkmanager-js

HarmonyOS SDK Manager的js实现
## api说明
```ts
export interface SdkInfoHandler {
  /**
   * 获取本地已安装的SDK
   *
   * @return 本地已安装sdk集合
   */
  getLocalSdks(): Map<PathAndApiVersion, Component>;
  
  /**
   * 检查本地的组件是否有每个path和版本对应的sdk，如果有sdk，就不下载，如果缺少，就去下载对应版本的组件。
   * 下载完毕后，以path->SdkComponent的形式返回，中间有任何一个组件下载失败，或者不存在，就认为是失败，直接抛异常
   * 返回一个Promise，通过Promise.then()获取SDK信息
   *
   * @return Promise<Map<PathAndApiVersion, Component>>
   */
  getOrDownload(pathAndApiVersions: PathAndApiVersion[]): Promise<Map<PathAndApiVersion, Component>>;
}
```
## 使用方法

```ts
import { SimpleProgress } from "@ohos/sdkmanager-common";

const prjSdkConfig = HosPrjSdkConfig.builder('sdk根路径').nodeHome('node路径').npmConfig('.npmrc路径').sdkProxy('代理信息');
// 可以自己传入一个自定义的progress用于打印sdk内部的日志信息，这里的SimpleProgress不打印任何日志
const handler = new SimpleHosPrjSdkHandler(prjSdkConfig, new SimpleProgress());

1、获取HarmonyOS SDK
const hosSdkInfoHandler = handler.getSdkHandler(HosPrjSdkType.HARMONYOS);
// 获取本地所有的HarmonyOS SDK
const localSdks = hosSdkInfoHandler.getLocalSdks();
// 从本地所有的HarmonyOS SDK中查找api8的toolchains
const toolchains = localSdks.get(new PathAndApiVersion(ComponentPath.TOOLCHAINS, 8));
// 获取api8的HarmonyOS toolchains，如果本地不存在该SDK，则会触发下载
const downloadSdks = hosSdkInfoHandler.getOrDownload(new PathAndApiVersion(ComponentPath.TOOLCHAINS, 8))
const toolchains = downloadSdks.get(new PathAndApiVersion(ComponentPath.TOOLCHAINS, 8));

2、获取HarmonyOS下面的OpenHarmony SDK
const ohSdkInfoHandler = handler.getSdkHandler(HosPrjSdkType.OPENHARMONY);
// 获取本地所有的HarmonyOS 下的OpenHarmony SDK
const localSdks = ohSdkInfoHandler.getLocalSdks();
// 从本地查找HarmonyOS下OpenHarmony SDK api8的toolchains
const toolchains = localSdks.get(new PathAndApiVersion(ComponentPath.TOOLCHAINS, 8));
// 获取api8的HarmonyOS下OpenHarmony SDK api8的toolchains，如果本地不存在该SDK，则会触发下载
const downloadSdks = ohSdkInfoHandler.getOrDownload(new PathAndApiVersion(ComponentPath.TOOLCHAINS, 8))
const toolchains = downloadSdks.get(new PathAndApiVersion(ComponentPath.TOOLCHAINS, 8));
```

## 引用方式
```json
"dependencies": {
  "@ohos/hos-sdkmanager-common": "2.0.7"
},
```