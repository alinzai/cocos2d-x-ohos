{
  "title": "openHarmony project-level build-profile configuration",
  "description": "This document describes the configuration details of the openHarmony project-level configuration file build-profile.json5.",
  "type": "object",
  "propertyNames": {
    "enum": [
      "app",
      "modules"
    ]
  },
  "properties": {
    "app": {
      "description": "OpenHarmony application project-level configuration information, which is shared by all FA/PA modules, including the compilation API level, signature, and product information.",
      "type": "object",
      "propertyNames": {
        "enum": [
          "compileSdkVersion",
          "compatibleSdkVersion",
          "signingConfigs",
          "products",
          "multiProjects"
        ]
      },
      "properties": {
        "compileSdkVersion": {
          "description": "Specifies the SDK API version when the OpenHarmony application is compiled. This value determines the value of apiTargetVersion in the HAP package.",
          "type": "integer",
          "exclusiveMinimum": 7
        },
        "compatibleSdkVersion": {
          "description": "Specifies the lowest SDK API level version compatible with the OpenHarmony application during compilation. This value determines the value of apiCompatibleVersion in the HAP package.",
          "type": "integer",
          "exclusiveMinimum": 3
        },
        "signingConfigs": {
          "description": "This field contains the signature materials used for modifying the openHarmony application. Multiple signature materials can be configured.",
          "type": "array",
          "items": {
            "type": "object",
            "propertyNames": {
              "enum": [
                "name",
                "material",
                "type"
              ]
            },
            "properties": {
              "material": {
                "type": "object",
                "propertyNames": {
                  "enum": [
                    "storePassword",
                    "certpath",
                    "keyAlias",
                    "keyPassword",
                    "profile",
                    "signAlg",
                    "storeFile"
                  ]
                },
                "properties": {
                  "storePassword": {
                    "type": "string"
                  },
                  "certpath": {
                    "type": "string"
                  },
                  "keyAlias": {
                    "type": "string"
                  },
                  "keyPassword": {
                    "type": "string"
                  },
                  "profile": {
                    "type": "string"
                  },
                  "signAlg": {
                    "type": "string",
                    "enum": [
                      "SHA256withECDSA"
                    ]
                  },
                  "storeFile": {
                    "type": "string"
                  }
                },
                "required": [
                  "storeFile",
                  "storePassword",
                  "keyAlias",
                  "keyPassword",
                  "signAlg",
                  "profile",
                  "certpath"
                ]
              },
              "name": {
                "type": "string"
              },
              "type": {
                "type": "string",
                "enum": [
                  "HarmonyOS",
                  "OpenHarmony"
                ]
              }
            },
            "required": [
              "name",
              "material"
            ]
          }
        },
        "products": {
          "description": "This field is used to describe different product types defined by the openHarmony application. By default, a default product exists and different signature materials can be specified.",
          "type": "array",
          "items": {
            "type": "object",
            "propertyNames": {
              "enum": [
                "name",
                "signingConfig",
                "bundleName"
              ]
            },
            "required": [
              "name"
            ],
            "properties": {
              "name": {
                "description": "Defines the product type name of the openHarmony application. By default, there is a product named default.",
                "type": "string",
                "pattern": "^[\\da-zA-Z_-]+$"
              },
              "signingConfig": {
                "description": "Specifies the signature material used by the product. The current signature material must be the material declared in app/signingConfigs. You can select the signature material based on its name.",
                "type": "string"
              },
              "bundleName": {
                "description": "Indicates the bundle name of the application. It uniquely identifies the application.",
                "type": "string",
                "maxLength": 127,
                "minLength": 7,
                "pattern": "^(([a-zA-Z]|[a-zA-Z]\\w+)[.]([\\da-zA-Z_.]+))|([{]([a-zA-Z]|[a-zA-Z]\\w+)[}](.huawei.com))|[{](bundleName)[}]$"
              }
            }
          }
        },
        "multiProjects": {
          "description": "Indicates whether current project supports multiple project.",
          "type": "boolean",
          "default": false
        }
      },
      "required": [
        "compileSdkVersion",
        "compatibleSdkVersion"
      ]
    },
    "modules": {
      "description": "Describes all modules in the openHarmony application. The module configuration includes the name, path, and target-product association configuration.",
      "type": "array",
      "items": {
        "type": "object",
        "propertyNames": {
          "enum": [
            "name",
            "srcPath",
            "targets"
          ]
        },
        "properties": {
          "srcPath": {
            "description": "This section describes the source code path of the module. It is the relative path of the current configuration file. The path must contain configurations related to hvigorfile.ts/js and package.json.",
            "type": "string"
          },
          "name": {
            "description": "Logical name of a module. The value must be the same as that of moduleName in the config.json/module.json file.",
            "type": "string"
          },
          "targets": {
            "description": "Configure the association between the target of the module and the product of the application.",
            "type": "array",
            "items": {
              "type": "object",
              "propertyNames": {
                "enum": [
                  "name",
                  "applyToProducts"
                ]
              },
              "properties": {
                "name": {
                  "description": "Name of the module target. The target name must be in the target configuration in build-profile.json5 of the module-level.",
                  "type": "string",
                  "pattern": "^[\\da-zA-Z_-]+$"
                },
                "applyToProducts": {
                  "description": "Describes which products the target is used for, which means that different products can contain different targets.",
                  "type": "array",
                  "items": {
                    "type": "string",
                    "pattern": "^[\\da-zA-Z_-]+$"
                  },
                  "minItems": 1
                }
              }
            }
          }
        },
        "required": [
          "srcPath",
          "name"
        ]
      },
      "minItems": 1
    }
  },
  "required": [
    "app",
    "modules"
  ]
}
