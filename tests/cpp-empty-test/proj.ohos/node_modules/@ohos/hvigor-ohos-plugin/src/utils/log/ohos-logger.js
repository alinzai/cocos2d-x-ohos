"use strict";var __importDefault=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.OhosLogger=void 0;const log4js_1=require("log4js"),hvigor_log_js_1=require("@ohos/hvigor-base/src/log/hvigor-log.js"),os_1=__importDefault(require("os"));class OhosLogger extends hvigor_log_js_1.HvigorLogger{constructor(s){super(s),this.messageMap=new Map}static getLogger(s){return new OhosLogger(s)}_buildError(s,e){return e&&this.messageMap.set("code",e),this.messageMap.set("cause",s),this}_solution(s){return this.messageMap.set("solution",s),this}_file(s,e=-1,t=-1){let o=`at ${s}`;return e>0&&(o+=`:${e}`,t>0&&(o+=`:${t}`)),this.messageMap.set("file",o),this}_callstack(s){return this.getLevel()===log4js_1.levels.DEBUG&&this.messageMap.set("callstack",s),this}_printDebugCommand(s,e){this.debug(`[${s}]\n`,e)}_printWarn(s){const e=Array.from(this.messageMap.values());this.warn(this._formatLog(s),...e)}_printError(s){const e=Array.from(this.messageMap.values());this.error(this._formatLog(s),...e)}_printErrorAndExit(s="root"){const e=Array.from(this.messageMap.values());this.errorMessageExit(this._formatLog(s),...e)}_formatLog(s){let e=`A problem occurred in ${s} module:${os_1.default.EOL}`;return this.messageMap.has("code")&&(e+=`\t ERROR: Code: %s${os_1.default.EOL}`),e+=`\t ERROR: Cause: %s${os_1.default.EOL}`,this.messageMap.has("solution")&&(e+=`\t ERROR: Solution: %s${os_1.default.EOL}`),this.messageMap.has("file")&&(e+=`\t %s${os_1.default.EOL}`),this.messageMap.has("help")&&(e+=`\t ERROR: HelpUrl: %s${os_1.default.EOL}`),this.messageMap.has("callstack")&&(e+=`${os_1.default.EOL+os_1.default.EOL}    %s`),this.messageMap.clear(),e}}exports.OhosLogger=OhosLogger;