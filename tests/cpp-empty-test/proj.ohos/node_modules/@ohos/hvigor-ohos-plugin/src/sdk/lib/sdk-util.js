"use strict";var __importDefault=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.getNDownload=exports.contains=exports.findComponentByPathAndApi=exports.proxyFun=void 0;const hvigor_base_1=require("@ohos/hvigor-base"),sdkmanager_common_1=require("@ohos/sdkmanager-common"),deasync_1=__importDefault(require("deasync")),ohos_logger_js_1=require("../../utils/log/ohos-logger.js"),LOGGER=ohos_logger_js_1.OhosLogger.getLogger("Sdk"),proxyFun=()=>{var o,n,e;const t=hvigor_base_1.GlobalParam.getInstance();return{proxy:t.getConfig("proxy"),httpsProxy:t.getConfig("https-proxy"),noProxy:null!==(e=null!==(n=null!==(o=t.getConfig("noproxy"))&&void 0!==o?o:t.getConfig("no-proxy"))&&void 0!==n?n:process.env.NO_PROXY)&&void 0!==e?e:process.env.npm_config_noproxy}};exports.proxyFun=proxyFun;const findComponentByPathAndApi=(o,n)=>{for(const[e,t]of n.entries())if(e.equals(o))return t};exports.findComponentByPathAndApi=findComponentByPathAndApi;const contains=(o,n)=>{for(const[e,t]of n)if(e.equals(o))return t};exports.contains=contains;const getNDownload=(o,n)=>{const e=(0,deasync_1.default)(wrap);let t=new Map;try{t=e(o,n)}catch(o){if(!(o instanceof sdkmanager_common_1.SdkException))throw o;{const n=o.getErrorTip();LOGGER._buildError(n.getReason())._solution(`${n.getFixSuggestion()}`)._printErrorAndExit()}}return t};exports.getNDownload=getNDownload;const wrap=(o,n,e)=>{n.getOrDownload(o).then((o=>{e(void 0,o)})).catch((o=>{e(o,new Map)}))};