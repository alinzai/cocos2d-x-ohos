"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.HWorker=void 0;const worker_state_js_1=require("../enum/worker-state.js");class HWorker{constructor(t,e){this.worker=t,this.id=e,this.state=worker_state_js_1.WorkerState.IDLE,this.lastBusyTime=Date.now()}getState(){return this.state}getLastBusyTime(){return this.lastBusyTime}getId(){return this.id}terminate(t){this.setState(worker_state_js_1.WorkerState.DEAD),this.setLastBusyTime(Date.now()),this.worker.terminate().then(t())}setState(t){this.state=t}setLastBusyTime(t){this.lastBusyTime=t}doWork(t){return this.state===worker_state_js_1.WorkerState.IDLE&&(this.setState(worker_state_js_1.WorkerState.BUSY),this.curWorkId=t.getId(),this.worker.postMessage({id:t.getId(),workPath:t.getWorkPath(),inputData:t.getInputData()}),!0)}getCurWorkId(){return this.curWorkId}cancelCurWorkId(){this.curWorkId=void 0}}exports.HWorker=HWorker;