"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.markTaskExecuteSuccessful=exports.isIncrementalTask=void 0;const incremental_task_js_1=require("../external/task/incremental-task.js"),incremental_exec_task_js_1=require("../external/task/incremental-exec-task.js"),hvigor_log_js_1=require("../log/hvigor-log.js"),task_converter_js_1=require("../internal/task/proxy/task-converter.js"),log=hvigor_log_js_1.HvigorLogger.getLogger("task-util");function isIncrementalTask(e){if(!(e instanceof incremental_task_js_1.IncrementalTask))return!1;const t=e.declareInputs(),s=e.declareInputFiles(),a=e.declareOutputFiles(),r=0===t.size&&0===s.collect().size&&0===a.collect().size;return e instanceof incremental_exec_task_js_1.IncrementalExecTask?!(""===e.declareExecutionTool()&&""===e.declareExecutionCommand()&&0===e.declareExecutionEnv().size&&r):(r&&log.debug(`${e.getPath()} is declared as IncrementTask, but does not implement any incremental method.`),!r)}function markTaskExecuteSuccessful(e){var t,s;e.getEnabled()&&isIncrementalTask(e)&&(null===(s=null===(t=task_converter_js_1.taskConVert.getTaskProxy(e.getPath()))||void 0===t?void 0:t.getCurTaskSnapShot())||void 0===s||s.setExecutedSuccessful())}exports.isIncrementalTask=isIncrementalTask,exports.markTaskExecuteSuccessful=markTaskExecuteSuccessful;