"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i);var a=Object.getOwnPropertyDescriptor(t,i);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,r,a)}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&__createBinding(t,e,i);return __setModuleDefault(t,e),t},__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=void 0;const global_data_js_1=require("../data/global-data.js"),process_1=__importDefault(require("process")),util=__importStar(require("util")),cli_options_js_1=require("../../util/options/cli-options.js"),hvigor_log_js_1=require("../../log/hvigor-log.js"),trace_build_analyze_js_1=require("../../trace/trace-build-analyze.js"),index_js_1=require("../../../index.js"),project_cache_service_js_1=require("../cache/project-cache-service.js"),time_util_js_1=require("../../util/time-util.js"),propertiesAlias=cli_options_js_1.cliOptions.prop.alias,log=hvigor_log_js_1.HvigorLogger.getLogger("hvigor-init");function init(){const e=global_data_js_1.globalData.cliEnv;index_js_1.hvigor.setExtraConfig(e.configProps.get(propertiesAlias));const t=global_data_js_1.globalData.cliOpts;!1===t.parallel&&(index_js_1.hvigor.startParameters.parallelExecution=!1,trace_build_analyze_js_1.traceBuildAnalyze.isParallel=!1),!1===t.incremental&&(index_js_1.hvigor.startParameters.incrementalExecution=!1,trace_build_analyze_js_1.traceBuildAnalyze.isIncremental=!1),t.stacktrace&&(index_js_1.hvigor.startParameters.printStackTrace=!0);const i=index_js_1.hvigor.initRootProject(e.cwd);log.debug(`Hvigor init with startParameters:${util.inspect(index_js_1.hvigor.startParameters)}`),!1!==t.incremental&&initCacheService(i)}function initCacheService(e){const t=process_1.default.hrtime();project_cache_service_js_1.ProjectCacheService.getInstance(e).initialize();const i=process_1.default.hrtime(t),r=(0,time_util_js_1.formatTime)(i);log.debug(`Cache service initialization cost: ${r}.`)}exports.init=init;