"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PriorityDispatcher=void 0;const tcb_store_js_1=require("../store/tcb-store.js"),log_js_1=require("../log-collection/log.js");class PriorityDispatcher{dispatch(e,r,t,o){const s=r,c=r=>{const o=s.pop();return t.doWork(o,tcb_store_js_1.TcbStore.getTCB(o.getId()).getCallback(),tcb_store_js_1.TcbStore.getTCB(o.getId()).getCallbackInput(),r)?(e.addLog((0,log_js_1.generateScheduleLog)(`${Date.now()}`,o.getId(),r)),!0):(s.push(o),!1)};return!s.empty()&&(void 0!==o?(t.isIdleWorker(o)||!(!t.isRecycledWorker(o)||!t.createWorker(o)))&&c(o):!(!t.hasAvailableWorkers()&&!t.createWorker())&&c(t.getAvailableWorkers()[0]))}}exports.PriorityDispatcher=PriorityDispatcher;