"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.BuildPreviewerRes=void 0;const generate_loader_json_js_1=require("../../generate-loader-json.js"),legacy_generate_js_manifest_js_1=require("../../legacy-tasks/legacy-generate-js-manifest.js"),legacy_generate_loader_json_js_1=require("../../legacy-tasks/legacy-generate-loader-json.js"),abstract_previewer_res_js_1=require("./abstract-previewer-res.js"),legacy_hook_compile_resource_js_1=require("../../legacy-tasks/hook/legacy-hook-compile-resource.js"),replace_previewer_page_js_1=require("../../previewer/replace-previewer-page.js"),pre_check_syscap_js_1=require("../../pre-check-syscap.js"),task_names_js_1=require("../../common/task-names.js");var CommonTask=task_names_js_1.TaskNames.CommonTask;const fs_1=__importDefault(require("fs"));class BuildPreviewerRes extends abstract_previewer_res_js_1.AbstractPreviewerRes{constructor(e,s){super(e,s)}initTaskDepends(e){this._isFaMode?this.node.registryDependsOnTask(this,new legacy_generate_loader_json_js_1.LegacyGenerateLoaderJson(e),new legacy_generate_js_manifest_js_1.LegacyGenerateJsManifest(e),new legacy_hook_compile_resource_js_1.LegacyHookCompileResource(e)):this.node.registryDependsOnTask(this,new generate_loader_json_js_1.GenerateLoaderJson(e),new replace_previewer_page_js_1.ReplacePreviewerPage(e)),fs_1.default.existsSync(this.syscapJsonPath)&&this.node.registryDependsOnTask(this,new pre_check_syscap_js_1.PreCheckSyscap(e,CommonTask.PRE_CHECK_SYSCAP))}}exports.BuildPreviewerRes=BuildPreviewerRes;