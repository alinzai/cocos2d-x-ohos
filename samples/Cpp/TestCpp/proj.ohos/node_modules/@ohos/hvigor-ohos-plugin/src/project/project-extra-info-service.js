"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ProjectExtraInfoService=void 0;const module_type_enum_js_1=require("../enum/module-type-enum.js"),runtime_type_enum_js_1=require("../enum/runtime-type-enum.js"),legacy_project_model_impl_js_1=require("../model/project/legacy-project-model-impl.js"),project_model_impl_js_1=require("../model/project/project-model-impl.js"),array_util_js_1=require("../utils/array-util.js"),app_extra_info_js_1=require("./data/app-extra-info.js"),hap_extra_info_js_1=require("./data/hap-extra-info.js");class ProjectExtraInfoService{static getProjectExtraInfoByPath(e){const t=e.getProjectDir();if(this.projectExtraInfoMap.has(t))return this.projectExtraInfoMap.get(t);let r;return r=e instanceof project_model_impl_js_1.ProjectModelImpl||e instanceof legacy_project_model_impl_js_1.LegacyProjectModelImpl?new app_extra_info_js_1.AppExtraInfo(e):new hap_extra_info_js_1.HapExtraInfo(e),this.projectExtraInfoMap.set(e.getProjectDir(),r),r}static getProjectRuntimeOS(e){for(const t of e.getAllModules()){const e=t.getModuleType(),r=t.getProfileOpt().targets;if(!r)continue;const o=(0,array_util_js_1.getElementFromArr)(r,"default");if(o){const t=o.runtimeOS;if((e===module_type_enum_js_1.ModuleType.Entry||e===module_type_enum_js_1.ModuleType.Feature)&&t)return runtime_type_enum_js_1.RuntimeTypeEnum.valueOf(t)}}return runtime_type_enum_js_1.RuntimeTypeEnum.valueOf("OpenHarmony")}}exports.ProjectExtraInfoService=ProjectExtraInfoService,ProjectExtraInfoService.projectExtraInfoMap=new Map;